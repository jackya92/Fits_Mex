<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Fit Mex - Configuración</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms"></script>
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin href="https://fonts.gstatic.com" rel="preconnect" />
    <link
      href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;500;700&amp;display=swap"
      rel="stylesheet" />
    <script>tailwind.config = {darkMode: "class", theme: {extend: {colors: {primary: "#359EFF", "background-light": "#f5f7f8", "background-dark": "#0f1923"}, fontFamily: {display: "Lexend"}, borderRadius: {DEFAULT: "0.25rem", lg: "0.5rem", xl: "0.75rem", full: "9999px"}}}};</script>
    <style>
      .form-input {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
      }
      
      .fade-in {
        animation: fadeIn 0.5s ease-in-out;
      }
      
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }
      
      .success-message {
        background-color: #10B981;
        color: white;
        padding: 12px 16px;
        border-radius: 8px;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      
      .info-card {
        background-color: rgba(53, 158, 255, 0.1);
        border-left: 4px solid #359EFF;
        padding: 16px;
        border-radius: 8px;
        margin-top: 16px;
      }
    </style>
  </head>
  <body
    class="bg-background-light dark:bg-background-dark font-display text-gray-900 dark:text-gray-100">
    <div class="flex flex-col min-h-screen">
      <header class="w-full">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
          <div
            class="flex items-center justify-between h-16 border-b border-gray-200 dark:border-gray-700">
            <div class="flex items-center gap-4">
              <div class="w-6 h-6 text-primary">
                <svg fill="none" viewbox="0 0 48 48"
                  xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M42.4379 44C42.4379 44 36.0744 33.9038 41.1692 24C46.8624 12.9336 42.2078 4 42.2078 4L7.01134 4C7.01134 4 11.6577 12.932 5.96912 23.9969C0.876273 33.9029 7.27094 44 7.27094 44L42.4379 44Z"
                    fill="currentColor"></path>
                </svg>
              </div>
              <h1 class="text-xl font-bold text-gray-900 dark:text-white">Fit
                Mex</h1>
            </div>
            <div class="flex items-center gap-4">
              <button
                class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary">
                <svg fill="currentColor" height="24" viewbox="0 0 256 256"
                  width="24" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Zm88-29.84q.06-2.16,0-4.32l14.92-18.64a8,8,0,0,0,1.48-7.06,107.21,107.21,0,0,0-10.88-26.25,8,8,0,0,0-6-3.93l-23.72-2.64q-1.48-1.56-3-3L186,40.54a8,8,0,0,0-3.94-6,107.71,107.71,0,0,0-26.25-10.87,8,8,0,0,0-7.06,1.49L130.16,40Q128,40,125.84,40L107.2,25.11a8,8,0,0,0-7.06-1.48A107.6,107.6,0,0,0,73.89,34.51a8,8,0,0,0-3.93,6L67.32,64.27q-1.56,1.49-3,3L40.54,70a8,8,0,0,0-6,3.94,107.71,107.71,0,0,0-10.87,26.25,8,8,0,0,0,1.49,7.06L40,125.84Q40,128,40,130.16L25.11,148.8a8,8,0,0,0-1.48,7.06,107.21,107.21,0,0,0,10.88,26.25,8,8,0,0,0,6,3.93l23.72,2.64q1.49,1.56,3,3L70,215.46a8,8,0,0,0,3.94,6,107.71,107.71,0,0,0,26.25,10.87,8,8,0,0,0,7.06-1.49L125.84,216q2.16.06,4.32,0l18.64,14.92a8,8,0,0,0,7.06,1.48,107.21,107.21,0,0,0,26.25-10.88,8,8,0,0,0,3.93-6l2.64-23.72q1.56-1.48,3-3L215.46,186a8,8,0,0,0,6-3.94,107.71,107.71,0,0,0,10.87-26.25,8,8,0,0,0-1.49-7.06Zm-16.1-6.5a73.93,73.93,0,0,1,0,8.68,8,8,0,0,0,1.74,5.48l14.19,17.73a91.57,91.57,0,0,1-6.23,15L187,173.11a8,8,0,0,0-5.1,2.64,74.11,74.11,0,0,1-6.14,6.14,8,8,0,0,0-2.64,5.1l-2.51,22.58a91.32,91.32,0,0,1-15,6.23l-17.74-14.19a8,8,0,0,0-5-1.75h-.48a73.93,73.93,0,0,1-8.68,0,8,8,0,0,0-5.48,1.74L100.45,215.8a91.57,91.57,0,0,1-15-6.23L82.89,187a8,8,0,0,0-2.64-5.1,74.11,74.11,0,0,1-6.14-6.14,8,8,0,0,0-5.1-2.64L46.43,170.6a91.32,91.32,0,0,1-6.23-15l14.19-17.74a8,8,0,0,0,1.74-5.48,73.93,73.93,0,0,1,0-8.68,8,8,0,0,0-1.74-5.48L40.2,100.45a91.57,91.57,0,0,1,6.23-15L69,82.89a8,8,0,0,0,5.1-2.64,74.11,74.11,0,0,1,6.14-6.14A8,8,0,0,0,82.89,69L85.4,46.43a91.32,91.32,0,0,1,15-6.23l17.74,14.19a8,8,0,0,0,5.48,1.74,73.93,73.93,0,0,1,8.68,0,8,8,0,0,0,5.48-1.74L155.55,40.2a91.57,91.57,0,0,1,15,6.23L173.11,69a8,8,0,0,0,2.64,5.1,74.11,74.11,0,0,1,6.14,6.14,8,8,0,0,0,5.1,2.64l22.58,2.51a91.32,91.32,0,0,1,6.23,15l-14.19,17.74A8,8,0,0,0,199.87,123.66Z"></path>
                </svg>
              </button>
              <div
                class="bg-center bg-no-repeat aspect-square bg-cover rounded-full h-10 w-10"
                style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuDjmjLxpiOQkTsJc9FRy95_YhLyCaRHrEp-dJ7eWidAoUIOayonwxghhJhv21g1tiRC7Djm8JH7GhI0_nMZUEyC1AIw3B8FfNdWuSpcR8q0scVgnvu-2WYjg-w3nyQJrd8I5M80HjgqBFYoljHgXRigMps0bhpjPYzGiiQuzzwc6-50a8l-0m36G1HSpZ4el3K2DEN_KqY1E6jmtpfFkXJBOSCtst3ZKV_6w2ToFVxGvX61R6ZkFer_dRFr32_1gNHWJYq6uFuO2pw");'></div>
            </div>
          </div>
        </div>
      </header>
      <main class="flex-grow">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
          <div class="max-w-xl mx-auto">
            <h2
              class="text-3xl font-bold text-gray-900 dark:text-white mb-6">Configuración
              de peso y talla</h2>
              
            <!-- Mensaje de éxito (oculto inicialmente) -->
            <div id="successMessage" class="success-message fade-in hidden">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
              </svg>
              <span>¡Tus datos se han actualizado correctamente!</span>
            </div>
            
            <div class="space-y-6">
              <div>
                <label
                  class="block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2"
                  for="weight">Peso (kg)</label>
                <div class="relative rounded-lg">
                  <input
                    class="form-input block w-full pl-4 pr-12 py-3 rounded-lg bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 focus:ring-primary focus:border-primary text-gray-900 dark:text-white"
                    id="weight" name="weight" placeholder="Ej: 75"
                    type="number" min="20" max="300" step="0.1" />
                  <div
                    class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none text-gray-400 dark:text-gray-500">
                    <svg fill="currentColor" height="24" viewbox="0 0 256 256"
                      width="24" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M248,120h-8V88a16,16,0,0,0-16-16H208V64a16,16,0,0,0-16-16H168a16,16,0,0,0-16,16v56H104V64A16,16,0,0,0,88,48H64A16,16,0,0,0,48,64v8H32A16,16,0,0,0,16,88v32H8a8,8,0,0,0,0,16h8v32a16,16,0,0,0,16,16H48v8a16,16,0,0,0,16,16H88a16,16,0,0,0,16-16V136h48v56a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16v-8h16a16,16,0,0,0,16-16V136h8a8,8,0,0,0,0-16ZM32,168V88H48v80Zm56,24H64V64H88V192Zm104,0H168V64h24V175.82c0,.06,0,.12,0,.18s0,.12,0,.18V192Zm32-24H208V88h16Z"></path>
                    </svg>
                  </div>
                </div>
                <p id="weightError" class="text-red-500 text-sm mt-1 hidden">Por favor ingresa un peso válido (20-300 kg)</p>
              </div>
              <div>
                <label
                  class="block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2"
                  for="height">Talla (cm)</label>
                <div class="relative rounded-lg">
                  <input
                    class="form-input block w-full pl-4 pr-12 py-3 rounded-lg bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 focus:ring-primary focus:border-primary text-gray-900 dark:text-white"
                    id="height" name="height" placeholder="Ej: 180"
                    type="number" min="100" max="250" step="0.1" />
                  <div
                    class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none text-gray-400 dark:text-gray-500">
                    <svg fill="currentColor" height="24" viewbox="0 0 256 256"
                      width="24" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M235.32,73.37,182.63,20.69a16,16,0,0,0-22.63,0L20.68,160a16,16,0,0,0,0,22.63l52.69,52.68a16,16,0,0,0,22.63,0L235.32,96A16,16,0,0,0,235.32,73.37ZM84.68,224,32,171.31l32-32,26.34,26.35a8,8,0,0,0,11.32-11.32L75.31,128,96,107.31l26.34,26.35a8,8,0,0,0,11.32-11.32L107.31,96,128,75.31l26.34,26.35a8,8,0,0,0,11.32-11.32L139.31,64l32-32L224,84.69Z"></path>
                    </svg>
                  </div>
                </div>
                <p id="heightError" class="text-red-500 text-sm mt-1 hidden">Por favor ingresa una talla válida (100-250 cm)</p>
              </div>
              
              <!-- Información del IMC (se mostrará cuando se ingresen datos válidos) -->
              <div id="bmiInfo" class="info-card fade-in hidden">
                <h3 class="font-bold text-gray-900 dark:text-white mb-2">Tu Índice de Masa Corporal (IMC)</h3>
                <div class="flex justify-between items-center">
                  <div>
                    <p class="text-2xl font-bold text-primary" id="bmiValue">-</p>
                    <p class="text-sm text-gray-600 dark:text-gray-400" id="bmiCategory">-</p>
                  </div>
                  <div class="w-32 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
                    <div id="bmiBar" class="h-full bg-primary transition-all duration-500"></div>
                  </div>
                </div>
              </div>
              
              <div class="flex justify-end pt-4">
                <button id="updateButton"
                  class="w-full sm:w-auto px-6 py-3 rounded-lg bg-primary text-background-dark font-bold text-base hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-background-light dark:focus:ring-offset-background-dark focus:ring-primary transition-colors">
                  Actualizar
                </button>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Elementos del DOM
        const updateButton = document.getElementById('updateButton');
        const successMessage = document.getElementById('successMessage');
        const weightInput = document.getElementById('weight');
        const heightInput = document.getElementById('height');
        const weightError = document.getElementById('weightError');
        const heightError = document.getElementById('heightError');
        const bmiInfo = document.getElementById('bmiInfo');
        const bmiValue = document.getElementById('bmiValue');
        const bmiCategory = document.getElementById('bmiCategory');
        const bmiBar = document.getElementById('bmiBar');
        
        // Cargar datos guardados al iniciar
        loadSavedData();
        
        // Evento para actualizar datos
        updateButton.addEventListener('click', function() {
          if (validateForm()) {
            const weight = parseFloat(weightInput.value);
            const height = parseFloat(heightInput.value) / 100; // Convertir cm a m
            
            // Guardar en localStorage
            const userData = {
              weight: weight,
              height: height * 100, // Guardar en cm
              lastUpdate: new Date().toISOString()
            };
            
            localStorage.setItem('fitMexUserData', JSON.stringify(userData));
            
            // Mostrar mensaje de éxito
            showSuccessMessage();
            
            // Calcular y mostrar IMC
            calculateAndDisplayBMI(weight, height);
          }
        });
        
        // Eventos para validación en tiempo real
        weightInput.addEventListener('input', function() {
          validateWeight();
          if (validateForm()) {
            calculateAndDisplayBMI(parseFloat(weightInput.value), parseFloat(heightInput.value) / 100);
          }
        });
        
        heightInput.addEventListener('input', function() {
          validateHeight();
          if (validateForm()) {
            calculateAndDisplayBMI(parseFloat(weightInput.value), parseFloat(heightInput.value) / 100);
          }
        });
        
        // Función para cargar datos guardados
        function loadSavedData() {
          const saved = localStorage.getItem('fitMexUserData');
          if (saved) {
            const userData = JSON.parse(saved);
            weightInput.value = userData.weight;
            heightInput.value = userData.height;
            
            // Calcular y mostrar IMC si los datos son válidos
            if (validateForm()) {
              calculateAndDisplayBMI(userData.weight, userData.height / 100);
            }
          }
        }
        
        // Función para validar el formulario completo
        function validateForm() {
          return validateWeight() && validateHeight();
        }
        
        // Función para validar peso
        function validateWeight() {
          const weight = parseFloat(weightInput.value);
          if (isNaN(weight) || weight < 20 || weight > 300) {
            weightError.classList.remove('hidden');
            weightInput.classList.add('border-red-500');
            return false;
          } else {
            weightError.classList.add('hidden');
            weightInput.classList.remove('border-red-500');
            return true;
          }
        }
        
        // Función para validar talla
        function validateHeight() {
          const height = parseFloat(heightInput.value);
          if (isNaN(height) || height < 100 || height > 250) {
            heightError.classList.remove('hidden');
            heightInput.classList.add('border-red-500');
            return false;
          } else {
            heightError.classList.add('hidden');
            heightInput.classList.remove('border-red-500');
            return true;
          }
        }
        
        // Función para mostrar el mensaje de éxito
        function showSuccessMessage() {
          successMessage.classList.remove('hidden');
          successMessage.classList.add('fade-in');
          
          // Ocultar el mensaje después de 3 segundos
          setTimeout(function() {
            successMessage.classList.add('hidden');
          }, 3000);
        }
        
        // Función para calcular y mostrar el IMC
        function calculateAndDisplayBMI(weight, height) {
          const bmi = weight / (height * height);
          const roundedBMI = bmi.toFixed(1);
          
          bmiValue.textContent = roundedBMI;
          bmiInfo.classList.remove('hidden');
          
          // Determinar categoría del IMC
          let category = '';
          let barWidth = 0;
          
          if (bmi < 18.5) {
            category = 'Bajo peso';
            barWidth = 25;
          } else if (bmi < 25) {
            category = 'Peso normal';
            barWidth = 50;
          } else if (bmi < 30) {
            category = 'Sobrepeso';
            barWidth = 75;
          } else {
            category = 'Obesidad';
            barWidth = 100;
          }
          
          bmiCategory.textContent = category;
          bmiBar.style.width = `${barWidth}%`;
        }
      });
    </script>
  </body>
</html>